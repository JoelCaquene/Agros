{% load static %}
{% load i18n %} 
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>agros - {% trans "Login" %}</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">

    <style>
        :root { 
            --primary-blue: #003366; 
            --input-border: #d1d5db;
            --input-focus: #0066cc;
        }

        * { box-sizing: border-box; }

        body { 
            font-family: 'Poppins', sans-serif; 
            margin: 0; padding: 0; 
            display: flex; flex-direction: column; align-items: center; 
            min-height: 100vh; 
            background: #ffffff; /* Sincronizado com cadastro */
            color: #333; 
            overflow-x: hidden; 
        }

        /* Nome da empresa no TOP */
        .brand-top {
            width: 100%;
            max-width: 500px;
            padding: 20px;
            text-align: left;
        }
        .brand-top h1 {
            margin: 0;
            font-size: 2.2rem;
            font-weight: 800;
            color: #ff0000; 
            letter-spacing: 2px;
        }

        /* Imagem de cabeçalho */
        .header-image-container { 
            width: 100%; 
            max-width: 500px; 
            height: 160px; 
            overflow: hidden;
            position: relative;
        }
        .header-image-container img { 
            width: 100%; height: 100%; 
            object-fit: cover; 
        }

        /* Abas de navegação logo abaixo da imagem */
        .auth-tabs-top { 
            display: flex; width: 100%; max-width: 500px; 
            background: #fff;
            padding: 15px 10px;
            gap: 10px;
        }
        .tab-btn { 
            flex: 1; padding: 12px; 
            text-align: center; text-decoration: none; 
            font-weight: 700; font-size: 1rem; 
            color: #003366; border-radius: 10px;
            border: 2px solid #003366;
            transition: 0.3s; 
        }
        .tab-btn.active { 
            background: #003366; 
            color: #fff; 
        }

        .login-title {
            width: 100%;
            max-width: 500px;
            padding: 10px 20px;
            text-align: center;
        }
        .login-title h2 {
            margin: 0;
            color: #003366;
            font-weight: 800;
            font-size: 2.2rem;
        }

        /* Container do formulário */
        .login-container { 
            background: #fff; 
            padding: 20px 0px; 
            width: 100%; max-width: 500px; 
        }

        .form-group { margin-bottom: 25px; text-align: left; padding: 0 20px; }
        
        .form-group label { 
            font-size: 0.85rem; font-weight: 700; 
            margin-bottom: 8px; display: block; 
            color: #555; text-transform: uppercase;
        }

        .input-wrapper { 
            position: relative; 
            display: flex; align-items: center; 
        }

        .auth-form input { 
            width: 100%; 
            padding: 18px 15px 18px 55px; 
            border: 2px solid var(--input-border); 
            border-radius: 12px; 
            background: #fdfdfd; 
            font-size: 1.1rem; color: #000; 
            outline: none; transition: 0.3s; 
        }

        .auth-form input:focus { 
            border-color: var(--input-focus); 
            box-shadow: 0 0 0 4px rgba(0,102,204,0.1);
        }

        /* Indicador de Angola */
        .country-fix {
            position: absolute;
            left: 15px;
            font-weight: 700;
            color: #000;
            z-index: 5;
            display: flex;
            align-items: center;
        }
        .input-phone { padding-left: 95px !important; }

        .input-wrapper i.main-icon { 
            position: absolute; left: 18px; 
            font-size: 1.3rem; color: #999; 
        }

        .toggle-password { 
            position: absolute; right: 18px; 
            cursor: pointer; color: #999; font-size: 1.2rem;
        }

        .submit-button { 
            width: 100%; padding: 20px; 
            border: none; border-radius: 12px; 
            background: #003366; 
            color: white; font-size: 1.2rem; font-weight: 700; 
            cursor: pointer; display: flex; justify-content: center; 
            align-items: center; gap: 12px; 
            margin-top: 20px;
        }

        @media (max-width: 500px) { 
            .brand-top, .header-image-container, .auth-tabs-top, .login-title, .login-container { 
                width: 100%; 
            }
        }
    </style>
</head>
<body>

    <div class="brand-top">
        <h1>AGROS</h1>
    </div>

    <div class="header-image-container">
        <img src="{% static 'logo_grande.png' %}" alt="Agros Banner">
    </div>

    <div class="auth-tabs-top">
        <a href="#" class="tab-btn active">Login</a>
        <a href="{% url 'cadastro' %}" class="tab-btn">{% trans "Cadastro" %}</a>
    </div>

    <div class="login-title">
        <h2>Acesse sua conta</h2>
    </div>

    <div class="login-container">
        <form method="post" class="auth-form" id="loginForm">
            {% csrf_token %}
            
            <div class="form-group">
                <label>{% trans "Número de Telefone" %}</label>
                <div class="input-wrapper">
                    <div class="country-fix">
                        <span>AO +244</span>
                    </div>
                    {{ form.username }}
                </div>
            </div>

            <div class="form-group">
                <label>{% trans "Sua Senha" %}</label>
                <div class="input-wrapper">
                    <i class="fa-solid fa-lock main-icon"></i>
                    {{ form.password }}
                    <i class="fa-solid fa-eye-slash toggle-password" id="toggleLoginPass"></i>
                </div>
            </div>
            
            <div style="padding: 0 20px;">
                <button type="submit" class="submit-button">
                    <span>ENTRAR AGORA</span>
                </button>
            </div>
        </form>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const usernameInput = document.querySelector('input[name="username"]');
            const passwordInput = document.querySelector('input[name="password"]');

            if(usernameInput) {
                usernameInput.placeholder = 'Número de 9 digitos';
                usernameInput.classList.add('input-phone');
                usernameInput.type = 'number';
            }
            if(passwordInput) {
                passwordInput.placeholder = '{% trans "Digite sua senha" %}';
            }

            const toggleBtn = document.querySelector('#toggleLoginPass');
            if (toggleBtn && passwordInput) {
                toggleBtn.addEventListener('click', function() {
                    const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                    passwordInput.setAttribute('type', type);
                    this.classList.toggle('fa-eye-slash');
                    this.classList.toggle('fa-eye');
                });
            }
        });
    </script>
</body>
</html>
